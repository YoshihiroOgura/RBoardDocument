---
title: ADCサンプル
layout: sample_default
---

mruby/c 3.3 <a href="./mrubyc_class.html">標準IOクラス</a>対応<br>
<h3 class="link" id="adc_temperature">サーミスタ温度センサ</h3>
温度センサ：<a href="http://wiki.seeedstudio.com/Grove-Temperature_Sensor_V1.2/">http://wiki.seeedstudio.com/Grove-Temperature_Sensor_V1.2/</a><br>

<pre><code  class="ruby">
sensor = ADC.new(19)
temp = 0
while true
  param = sensor.read
  param = (ADC.max / param)-1
  temp = 1.0/(Math.log(param)/4275+1/298.15)-273.15
  puts("temp:" + temp.to_s)
  sleep(1)
end
</code></pre>

<hr id="first_boader">
<h3 class="link" id="adc_potentiometer">ボリューム制御</h3>
ボリュームを使用したLEDの明るさ制御<br>
ボリューム：<a href="https://www.switch-science.com/catalog/805/">https://www.switch-science.com/catalog/805/</a><br>

<pre><code  class="ruby">
volume = ADC.new(19)
led1 = PWM.new(0)
led1.frequency( 440 )
while true
  param = volume.read
  # adc値 × 100％ ÷ adcの最大値
  param = (param * 100 / ADC.max).to_i
  led1.duty(param)
end
</code></pre>

<hr id="first_boader">
<h3 class="link" id="adc_joystick">ジョイスティック</h3>
ジョイスティック:<a href="https://www.switch-science.com/catalog/884/">https://www.switch-science.com/catalog/884/</a><br>

<pre><code  class="ruby">
x = ADC.new(19)
y = ADC.new(20)
while true
  puts("x:#{x.read} / y:#{y.read}")
  sleep_ms(300)
end
</code></pre>