<!DOCTYPE html>
<html lang="ja">
  <head>
		<title>各クラス - RBoardDocument</title>
    <link rel="shortcut icon" href="./image/bug.ico">
		<meta charset="utf-8"/>
	  <!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-176702602-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'UA-176702602-1');
		</script>
		<link rel="stylesheet" type="text/css" href="main.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/a11y-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script>
		<script type="text/javascript" src="./style.js"></script>
		<link href="https://use.fontawesome.com/releases/v5.11.0/css/all.css" rel="stylesheet">
  </head>
  <body>
    <div id="header"><h1> Class </h1></div>
    <div id="main">
			mruby/cの規格に合わせたファームウェア用クラスのドキュメント<br>
			使用するには別途ファームウェアを書き込む必要があります。(動作検証中)<br>
			　→https://github.com/YoshihiroOgura/pic32mx170_mrubyc/releases/tag/v2.1.0.2
			<h2 id="Ruby">Ruby</h2>
			mruby/cにて対応しているRubyのクラスについては下記公式URLをご参照ください。<br>
			<a href="https://www.s-itoc.jp/activity/research/mrubyc/mrubyc_docs/library">
			https://www.s-itoc.jp/activity/research/mrubyc/mrubyc_docs/library</a>
            
			<hr id="first_boader">
			
			<h2 id="GPIO">GPIO</h2>
			<h3 id="GPIO_new">new(pin)</h3>
			コンストラクタ<br>
			pin：0～20<br>
			<hr id="second_boader">
			<h3 id="GPIO_setmode">setmode(mode)</h3>
			入出力方向設定<br>
			mode：0(出力),1(入力)<br>
			<hr id="second_boader">
			<h3 id="GPIO_write">write(value)</h3>
			出力<br>
			value：0(OFF),1(ON)<br>
			<hr id="second_boader">
			<h3 id="GPIO_read">read()</h3>
			入力<br>
			戻り値：0(OFF),1(ON)<br>
			
			<hr id="first_boader">

			<h2 id="ADC">ADC</h2>
			<h3 id="ADC_new">new(pin)</h3>
			コンストラクタ<br>
			pin：0～20<br>
			<hr id="second_boader">
			<h3 id="ADC_read">read</h3>
			取得値浮動小数点数出力<br>
			戻り値：0～1.023(0~3.3V)<br>
			<hr id="second_boader">
			<h3 id="ADC_read_v">read_v</h3>
			取得値電圧出力<br>
			戻り値：0～3.3<br>

			<hr id="first_boader">
			<h2 id="I2C">I2C</h2>
			<h3 id="I2C_new">new()</h3>
			コンストラクタ<br>
			<hr id="second_boader">
			<h3 id="I2C_write">write(sl_addr, addr, data1, data2,,,,)</h3>
			i2c書き込み<br>
			sl_addr：スレーブのアドレス<br>
			addr：書き込み対象のアドレス<br>
			data：書き込むデータ<br>
			<hr id="second_boader">
			<h3 id="I2C_read">read(sl_addr, size, addr)</h3>
			i2c読み込み<br>
			sl_addr：スレーブのアドレス<br>
			addr：読み込み対象のアドレス<br>
			size：読み込むデータのサイズ<br>

			<hr id="first_boader">
			<h2 id="SPI">SPI</h2>
			<h3 id="SPI_new">new()</h3>
			コンストラクタ<br>
			<hr id="second_boader">
			<h3 id="SPI_write">write(addr, data1, data2,,,,)</h3>
			spi書き込み<br>
			addr：書き込み対象のアドレス<br>
			data：書き込むデータ<br>
			<hr id="second_boader">
			<h3 id="SPI_read">read(size)</h3>
			spi読み込み<br>
			size：読み込むデータのサイズ<br>

			<hr id="first_boader">
			<h2 id="PWM">PWM</h2>
			パルス幅変調（PWM）疑似的アナログ出力としても使用する。<br>
			使用例：LEDの明るさを調整、圧電ブザー等の発振、サーボモーター制御など<br>
			周期⇔周波数計算
			<form oninput="opt1.value = Math.round(1 / Number(a1.value) * 1000000)">
				<input type="number" name="a1" value="0"size="10"placeholder="周波数">
				[Hz]=
				<output name="opt1">0</output>
				[us]
			</form><br>
			<form oninput="opt1.value = Math.round(1 / Number(a1.value) * 1000000)">
				<input type="number" name="a1" value="0"size="10"placeholder="周波数">
				[us]=
				<output name="opt1">0</output>
				[Hz]
			</form>
			<hr id="second_boader">
			<h3 id="PWM_new">new(pin,tckps)</h3>
			コンストラクタ<br>
			指定したピンをPWMとして使用します。<br>
			第二引数(tckps)にて倍率を指定します。(指定なしの場合は0)<br>
			　⇒ 周波数が低い場合に変更してみてください。<br>
			pin：0～20<br>
			tckps:0～6<br>
			<hr id="second_boader">
			<h3 id="PWM_frequency">frequency(n)</h3>
			周波数設定。0を指定すると出力を停止します。<br>
			n:整数(Hz)<br>
			<hr id="second_boader">
			<h3 id="PWM_period_us">period_us(n)</h3>
			周波数設定。マイクロ秒単位で指定します。0を指定すると出力を停止します。<br>
			n:整数(us)<br>
			<hr id="second_boader">
			<h3 id="PWM_duty">duty(n)</h3>
			デューティー比を、0（全オフ）から1023（全オン）までで指定します。<br>
			n:0~1023<br>
			<hr id="second_boader">
			<h3 id="PWM_period_us">period_us(n)</h3>
			パルス幅を、マイクロ秒単位で指定します。<br>
			n:整数(us)<br>

			<hr id="first_boader">
			<h2 id="UART">UART</h2>
			各デバイスとシリアル通信を行う。<br>
			例：Bluetoothモジュール、Wifiモジュール、GPSモジュール、PCなど
			<h3 id="UART_new">new(port, baud)</h3>
			port1はputsと同じUSB出力とデバッグ用UARTポートにて通信します。
			port2はGROVEとGPIO(Pin14,13)です。
			port：1 or 2(指定なしの場合は2)<br>
			baud：ボーレート値（例：19200）<br>
			<hr id="second_boader">
			<h3 id="UART_gets">gets</h3>
				文字列受信、"\n" までのバイト列を返します。<br>
			<hr id="second_boader">
			<h3 id="UART_write">write(text)</h3>
			文字列送信<br>
			text：文字列
			<hr id="second_boader">
			<h3 id="UART_write">puts(text)</h3>
			writeと同様です。
			<hr id="second_boader">
			<h3 id="UART_read">read(n)</h3>
			文字列受信、指定した文字数を受信します。<br>
			指定されたバイト数のデータが到着していない場合、nilを返します。<br>
			n：文字数
			<hr id="second_boader">
			<h3 id="UART_read_nonblock">read_nonblock(n)</h3>
			文字列受信、指定した文字数を受信します。<br>
			指定されたバイト数のデータが到着していない場合、到着しているデータを返します。<br>
			n：文字数
			<hr id="second_boader">
			<h3 id="UART_clear_tx_buffer">clear_tx_buffer</h3>
			送信文字列のバッファ初期化(RBoardにおいては無意味です)
			<hr id="second_boader">
			<h3 id="UART_clear_rx_buffer">clear_rx_buffer</h3>
			受信文字列のバッファ初期化

			<hr id="first_boader">
			<h2 id="Math">Math</h2>
			<a href="https://github.com/YoshihiroOgura/pic32mx170_mrubyc/blob/a0542f4fb76b2f3e1ba6e5078c9e3fc3a7164865/src/c_math.c#L240">
			https://github.com/YoshihiroOgura/pic32mx170_mrubyc/blob/a0542f4fb76b2f3e1ba6e5078c9e3fc3a7164865/src/c_math.c#L240</a>

			<hr id="first_boader">
			<h2 id="ETC">その他</h2>
			RBoard固有の関数
			<h3 id="leds_write">leds_write(bit)</h3>
			led制御<br>
			bit : 整数<br>
			<table border="1" class="table">
				<thead class="thead-dark">
					<tr>
						<th>led</th>
						<th>10進数</th>
						<th>2進数</th>
					</tr>
				</thead>
				<tr>
					<td>1</td>
					<td>1</td>
					<td>0b0001</td>
				</tr>
				<tr>
					<td>2</td>
					<td>2</td>
					<td>0b0010</td>
				</tr>
				<tr>
					<td>3</td>
					<td>4</td>
					<td>0b0100</td>
				</tr>
				<tr>
					<td>4</td>
					<td>8</td>
					<td>0b1000</td>
				</tr>
			</table>

			<hr id="second_boader">
			<h3 id="sw">sw()</h3>
			スイッチの状態読み込み<br>
			戻り値：0 or 1<br>

			<hr id="second_boader">
			<h3 id="pinInit">pinInit</h3>
			すべてのピン設定を初期状態へ戻す。

			<hr id="second_boader">
			<h3 id="puts">puts(txt)</h3>
			文字列出力<br>
			ターミナルソフトの設定については<a href="./console.html">こちら</a>
			txt：文字列
		</div>

		<div id="submenu">
			<script src="contents.js"></script>

			<div id="submenu_header">Class</div>
			<div id="ruby_class">
				<details>
					<summary><a href="#Ruby">Ruby</a></summary>
        </details>
        <details>
					<summary><a href="#GPIO">GPIO</a></summary>
					<ul id="class_ul">
						<li><a href="#GPIO_new">new</a></li>
						<li><a href="#GPIO_setmode">setmode</a></li>
						<li><a href="#GPIO_write">write</a></li>
						<li><a href="#GPIO_read">read</a></li>
					</ul>
				</details>
				<details>
					<summary><a href="#ADC">ADC</a></summary>
					<ul id="class_ul">
						<li><a href="#ADC_new">new</a></li>
						<li><a href="#ADC_read">read</a></li>
						<li><a href="#ADC_read_v">read_v</a></li>
					</ul>
				</details>
				<details>
					<summary><a href="#I2C">I2C</a></summary>
					<ul id="class_ul">
						<li><a href="#I2C_write">write</a></li>
						<li><a href="#I2C_read">read</a></li>
					</ul>
        </details>
        <details>
					<summary><a href="#SPI">SPI</a></summary>
					<ul id="class_ul">
						<li><a href="#SPI_write">write</a></li>
						<li><a href="#SPI_read">read</a></li>
					</ul>
				</details>
				<details>
					<summary><a href="#PWM">PWM</a></summary>
					<ul id="class_ul">
						<li><a href="#PWM_new">new</a></li>
						<li><a href="#PWM_frequency">frequency</a></li>
						<li><a href="#PWM_duty">duty</a></li>
						<li><a href="#PWM_period_us">period_us</a></li>
					</ul>
				</details>
				<details>
					<summary><a href="#UART">UART</a></summary>
					<ul id="class_ul">
						<li><a href="#UART_new">new</a></li>
						<li><a href="#UART_gets">gets</a></li>
						<li><a href="#UART_read">read</a></li>
						<li><a href="#UART_write">write</a></li>
						<li><a href="#UART_puts">puts</a></li>
						<li><a href="#UART_read_nonblock">read_nonblock</a></li>
						<li><a href="#UART_clear_tx_buffer">clear_tx_buffer</a></li>
						<li><a href="#UART_clear_rx_buffer">clear_rx_buffer</a></li>
					</ul>
				</details>
				<details>
					<summary><a href="#Math">Math</a></summary>
				</details>
				<details>
					<summary><a href="#ETC">その他</a></summary>
					<ul id="class_ul">
						<li><a href="#leds_write">leds_write</a></li>
						<li><a href="#sw">sw</a></li>
						<li><a href="#pinInit">pinInit</a></li>
						<li><a href="#puts">puts</a></li>
					</ul>
				</details>
			</div>
    </div>
	</body>
</html>
